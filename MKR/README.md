# Модульна контрольна робота 
## Опис програми

Ця програма реалізує клієнт-серверну систему для обчислення середньої кількості кроків у послідовностях Колатца для чисел у діапазоні[1;N] з використанням протоколу TCP/IP.

Система складається з двох частин:

**Сервер**
* Створює TCP-сокет і прослуховує заданий порт (за замовчуванням 9000).
* Приймає одне вхідне з’єднання від клієнта.
* Отримує від клієнта ціле додатне число N у текстовому форматі (рядок з числом).
* Для кожного числа  i∈[1;N] обчислює послідовність Колатца та визначає кількість кроків до досягнення 1.
* Обчислює середнє значення кількості кроків по всіх числах у діапазоні [1;N].
* Надсилає клієнту результат (середню кількість кроків) у вигляді рядка та закриває з’єднання (обробляється один клієнт згідно з вимогами).

**Клієнт**
* При запуску не запитує значення у користувача, а отримує N зі змінної оточення контейнера COLLATZ_COUNT.
* Отримує параметри підключення до сервера зі змінних оточення:
    * SERVER_HOST — хост/ім’я контейнера сервера,
    * SERVER_PORT — порт сервера.
* Встановлює TCP-з’єднання з сервером.
* Надсилає серверу значення N у текстовому форматі.
* Очікує відповідь сервера, отримує середнє значення кількості кроків і виводить його в консоль контейнера.
* Закриває з’єднання та завершує роботу.

## Логіка роботи програми
**Клієнт**

1. Зчитує змінні оточення COLLATZ_COUNT, SERVER_HOST, SERVER_PORT.
2. Підключається до сервера по TCP.
3. Надсилає серверу рядок з числом N.
4. Приймає відповідь — середню кількість кроків для діапазону [1;N].
5. Виводить результат у стандартний вивід.

**Сервер**

1. Запускається та починає прослуховувати порт.
2. Приймає підключення клієнта.
3. Читає рядок з числом N та перевіряє коректність (N має бути додатним цілим).
4. Для кожного  i від 1 до N обчислює кількість кроків у послідовності Колатца до 1.
5. Обчислює середнє значення та повертає його клієнту у вигляді рядка.
6. Закриває з’єднання і завершує роботу (один клієнт).

## Контейнеризація (Docker)

* Сервер загорнуто у Docker-контейнер з Dockerfile, який при старті запускає серверну програму та містить директиву EXPOSE 9000.
* Клієнт загорнуто у Docker-контейнер з окремим Dockerfile, який при старті одразу виконує клієнтську програму.
* Для зручного запуску двох контейнерів в одній мережі використовується docker-compose.yml, де задаються необхідні змінні оточення та порядок запуску сервісів.

## Приклад роботи програми:
* термінал сервера:
```
[server] Listening on 0.0.0.0:9000
[server] Client connected: ('172.18.0.3', 47318)
[server] Sent average steps for N=20000: 47.06675
[server] Connection closed. Server stops (single client).
```
* термінал клієнта:
```
47.06675
exited with code 0
```
